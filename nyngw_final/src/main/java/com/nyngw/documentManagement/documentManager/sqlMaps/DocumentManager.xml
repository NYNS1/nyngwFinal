<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.nyngw.documentManagement.documentManager.dao.DocumentManagerDao">
	
	<select id="selectDocumentCount" resultType="java.lang.Integer">
		select count(*) from document
	</select>
	
	<select id="selectDocumentManagerList" parameterType="java.lang.String" resultType="com.nyngw.dto.DocumentViewVO">
		select 
			dv_code_name,
       		dv_doc_date,
       		dv_doc_name,
       		dv_doc_number,
       		dv_mem_name
		from documentview where dv_doc_number like '%'||#{dv_doc_number}||'%'
	</select>
	
	<select id="selectDocumentDetail" parameterType="java.lang.String" resultType="com.nyngw.dto.DocumentVO">
		select * from document where doc_number = #{dv_doc_number}
	</select>
	
	<select id="selectDocumentUpdateForm" parameterType="java.lang.String" resultType="com.nyngw.dto.DocumentVO">
		select * from document where doc_number = #{doc_number}
	</select>
	
<!-- 	<select id="selectDocumentView" parameterType="java.lang.String" resultType="com.nyngw.dto.DocumentViewVO"> -->
<!-- 		select dv_doc_number from documentview where dv_doc_number like #{dv_doc_number} -->
<!-- 	</select> -->
	
	<update id="documentManagerUpdate" parameterType="com.nyngw.dto.DocumentVO">
		update document
		set doc_code_number = #{doc_code_number},
			doc_number = #{doc_number},
			doc_name = #{doc_name},
			doc_explanation = #{doc_explanation},
			doc_file_name = #{doc_file_name},
			doc_mem_number = #{doc_mem_number}
		where  doc_number = #{doc_number}
	</update>
	
	<update id="documentManagerInsert">
		insert into document(doc_number, doc_name, doc_date, doc_file_name, doc_explanation, doc_code_number, doc_mem_number, doc_lifetime, doc_eadoc)
		values('doc'||doc_seq.nextval,#{doc_name},sysdate, #{doc_file_name}, #{doc_explanation},#{doc_code_number},#{doc_mem_number},#{doc_lifetime},#{doc_eadoc})
	</update>
</mapper>